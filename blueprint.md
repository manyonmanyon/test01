# 引っ越し見積もりアプリ ブループリント

## 概要

このアプリケーションは、ユーザーが引っ越しの準備を円滑に進めるための支援ツールです。写真や情報を入力することで、必要な資材（例：段ボール箱の数）や大まかな費用を見積もることができます。

## 実装済み機能

- **初期セットアップ:**
  - HTML, CSS, JavaScriptの基本的なプロジェクト構造
  - GitリポジトリとGitHubへの接続

## 現在の計画：AI支援型の箱予測ウィザード

### 目的

ユーザーがアップロードした写真を基に、Vision Language Model API（のシミュレーション）を呼び出して「本の種類と冊数」を自動分析する。その結果をユーザーに提示し、ユーザーは「平均的な厚さ」を追認するだけで、より簡単かつ正確に箱の数を予測できる体験を提供する。

### 実装ステップ

1.  **模擬AI分析機能の実装 (`main.js`):**
    -   Vision APIの呼び出しをシミュレートする`callVisionApi()`関数を作成する。
    -   この関数は、処理時間を模擬するために2〜3秒の遅延の後に、固定の分析結果（例：`{ paperback: 5, hardcover: 3 }`のようなオブジェクト）を返すPromiseを返すように実装する。

2.  **UIフローの再構築 (`main.js`のWebコンポーネント):**
    -   **ファイルアップロード後:** 「アップロードして次へ」ボタンを押すと、`callVisionApi()`関数を呼び出す。
    -   **分析中:** ボタンの表示を「画像分析中...」とスピナーに変更し、AIが動作しているかのような演出を行う。
    -   **分析完了後:**
        -   アップロードエリアを非表示にする。
        -   AIの分析結果（本の種類と冊数）を画面に表示する。
        -   分析結果に基づき、**動的に**厚さ選択のドロップダウンリストを生成する。（例：「文庫本 5冊の厚さ」「ハードカバー 3冊の厚さ」を選択させるUI）
        -   最終計算のための「箱の数を計算する」ボタンと共に、ウィザードエリアを表示する。

3.  **動的な計算ロジックの実装 (`main.js`):**
    -   「箱の数を計算する」ボタンが押された際のロジックを更新する。
    -   動的に生成された各厚さ選択フォームから値を取得する。
    -   本の種類ごとの体積を合計して、全体の総体積を算出する（例：`文庫本の体積 × 冊数 + ハードカバーの体積 × 冊数`）。
    -   以前と同様のロジックで、総体積から必要な箱の数を計算し、結果を表示する。

## UI改善

### 目的
アプリケーションの使いやすさと視覚的な魅力を向上させ、よりモダンで直感的なユーザー体験を提供する。

### 実装ステップ
1.  **デザインの刷新 (`style.css`):**
    -   **タイポグラフィ:** Google Fontsから「M PLUS Rounded 1c」をインポートし、全体のフォントとして適用する。
    -   **カラーとレイアウト:** 背景に subtle なグラデーションを適用し、メインコンテナにはよりはっきりとした影（ドロップシャドウ）を追加して立体感を出す。
    -   **アイコン:** ボタンやファイル入力エリアにSVGアイコンを追加して、視覚的に分かりやすくする。
2.  **インタラクティブ性の向上 (`main.js`のWebコンポーネント):**
    -   **画像プレビュー機能:** ユーザーがファイルを選択した際に、その画像のサムネイルを画面に表示する。これにより、どのファイルが選択されたかを確認できる。
    -   **アップロード進捗バー:** ファイルアップロード中に、全体の進捗を示すプログレスバーを表示する。Firebaseの`UploadTask`が持つ進捗イベントを活用して実現する。
    -   **アニメーション:** 結果表示のテキストにフェードインアニメーションを追加し、視覚的なフィードバックを強化する。
    -   **処理中スピナー:** ファイルアップロード中など、時間がかかる処理が実行されている間、ボタン上にスピナーを表示して、ユーザーに処理中であることを明確に伝える。
